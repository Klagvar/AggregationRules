# JSON Format for Aggregated Preference Profiles

Формат описывает входные данные для алгоритмов агрегирования предпочтений. В файле хранятся готовые ранжировки альтернатив, матрица весов мест (опционально) и профили полезности экспертов.

```json
{
  "metadata": {
    "title": "Example Profile",
    "source": "Textbook"
  },
  "alternatives": ["A", "B", "C"],
  "rankings": [
    {
      "order": ["A", "B", "C"],
      "voters": 23,
      "weights": {"A": 2, "B": 4, "C": 5}
    },
    {
      "order": ["B", "C", "A"],
      "voters": 17,
      "weights": {"A": 6, "B": 1, "C": 3}
    }
  ],
  "utilityProfiles": [
    {
      "id": "Expert-1",
      "weight": 0.5,
      "utilities": {"A": 0.90, "B": 0.70, "C": 0.40}
    }
  ]
}
```

## Поля

### `alternatives`
Массив строк. Порядок фиксирует глобальный идентификатор альтернативы (используется валидацией ранжировок, полезностей и весов).

### `rankings`
Массив объектов. Каждый объект описывает одну индивидуальную ранжировку и число голосов за неё.

| Поле      | Тип                     | Описание |
|-----------|-------------------------|----------|
| `order`   | массив строк            | Строгое ранжирование без повторов, перечисляет альтернативы в порядке убывания предпочтения. |
| `voters`  | целое положительное     | Число голосов за данную ранжировку. |
| `weights` | объект `alt → weight`   | (опционально) веса мест для метода взвешенной суммы рангов. |

`order` должен содержать все альтернативы и только их. 

**Примечание о `weights`:** Поле используется только для метода взвешенной суммы рангов. Если веса не указаны ни в одной ранжировке, этот метод пропускается. Если хотя бы одна ранжировка содержит `weights`, то веса должны быть указаны во всех ранжировках.

### `utilityProfiles`
Опциональный массив. Используется для вычисления коллективной полезности (метод Харшаньи).

| Поле        | Тип                   | Описание |
|-------------|-----------------------|----------|
| `id`        | строка                | Произвольный идентификатор эксперта. |
| `weight`    | число `> 0`           | Вес (значимость) данного эксперта в аддитивной функции. |
| `utilities` | объект `alt → value`  | Значения индивидуальной полезности в диапазоне `[0, 1]` для каждой альтернативы. |

У каждой записи должны быть значения для всех альтернатив.

### `metadata`
Опциональные описательные поля (`title`, `source`, `notes` и т. д.). Не участвуют в вычислениях.

## Требования к данным

- Количество альтернатив в `alternatives` должно совпадать с количеством элементов в `order` и количеством ключей в `weights`/`utilities`.
- Значения `voters` — положительные целые числа.
- Весовые коэффициенты и значения полезностей — положительные числа (полезности ограничены интервалом `[0, 1]`).
- Если поле `utilityProfiles` отсутствует, блок расчётов по полезности пропускается.
- Если ни один элемент `rankings` не содержит `weights`, метод взвешенной суммы рангов пропускается.

## Использование

```
java -cp out aggregation.Main data/profile_example.json
```

Приложение загрузит профиль и построит:
1. Коллективное ранжирование по сумме мест и (при наличии весов) по взвешенной сумме.
2. Коллективную полезность (если заданы `utilityProfiles`).
3. Медиану Кемени, матрицу расстояний и минимальное расстояние `d*`.
